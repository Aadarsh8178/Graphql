(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{62:function(e,n,t){},65:function(e,n,t){"use strict";t.r(n);var c,a,i,r,o,d=t(4),l=t.n(d),j=t(48),s=t.n(j),b=(t(62),t(44)),u=t(20),O=t(73),h=t(29),x=t(79),m=Object(x.a)(c||(c=Object(h.a)(["\n  {\n    books {\n      name\n      id\n    }\n  }\n"]))),k=Object(x.a)(a||(a=Object(h.a)(["\n  query {\n    authors {\n      name\n      id\n    }\n  }\n"]))),v=Object(x.a)(i||(i=Object(h.a)(["\n  mutation addBook($name: String!, $genre: String!, $authorId: ID!) {\n    addBook(name: $name, genre: $genre, authorId: $authorId) {\n      name\n      genre\n      id\n    }\n  }\n"]))),f=Object(x.a)(r||(r=Object(h.a)(["\n  query ($id: ID!) {\n    book(id: $id) {\n      id\n      name\n      genre\n      author {\n        id\n        name\n        age\n        books {\n          name\n          id\n        }\n      }\n    }\n  }\n"]))),p=Object(x.a)(o||(o=Object(h.a)(["\n  mutation ($id: ID!) {\n    deleteBook(id: $id) {\n      name\n      id\n    }\n  }\n"]))),g=t(69),w=t(81),S=t(3),$=function(e){var n=e.id,t=e.setSelectedBook,c=e.deleteAllowed,a=e.ind,i=Object(g.a)(f),r=Object(u.a)(i,2),o=r[0],l=r[1],j=l.loading,s=l.error,b=l.data,O=Object(w.a)(p,{update:function(){t(null)}}),h=Object(u.a)(O,1)[0];Object(d.useEffect)((function(){n&&o({variables:{id:n}})}),[n]);return n?Object(S.jsxs)("div",{id:"book-details",children:[j&&Object(S.jsx)("p",{children:"Loading..."}),s&&Object(S.jsx)("p",{children:"Error"}),b&&b.book&&Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:b.book.name}),Object(S.jsx)("p",{children:b.book.genre}),Object(S.jsx)("p",{children:b.book.author.name}),Object(S.jsx)("p",{children:"All books by this author:"}),Object(S.jsx)("ul",{className:"other-books",children:b.book.author.books.map((function(e){return Object(S.jsx)("li",{children:e.name},e.id)}))}),c?Object(S.jsx)("p",{className:"theme-button",style:{background:"#eee"},onClick:function(){h({variables:{id:n},refetchQueries:[{query:m}]})},children:"Delete"}):Object(S.jsxs)("span",{className:"dull-text",children:["Delete allowed from ",a+1,"th book onwards"," "]})]})]}):Object(S.jsx)("div",{id:"book-details",children:Object(S.jsx)("p",{children:"No book selected..."})})},q=function(){var e=Object(d.useState)(),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(O.a)(m),i=a.loading,r=a.error,o=a.data;return i?Object(S.jsx)("p",{children:"Loading..."}):r?Object(S.jsx)("p",{children:"error"}):Object(S.jsxs)("div",{children:[Object(S.jsx)("ul",{id:"book-list",children:o.books.map((function(e,n){return Object(S.jsx)("li",{onClick:function(){return c(Object(b.a)(Object(b.a)({},e),{},{index:n}))},children:e.name},e.id)}))}),Object(S.jsx)($,{id:null===t||void 0===t?void 0:t.id,setSelectedBook:c,deleteAllowed:(null===t||void 0===t?void 0:t.index)>6,ind:5})]})},y=t(74),E=t(77),I=t(76),N=t(78),B=t(75),R=t(52),D=function(){var e=Object(d.useState)(""),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(d.useState)(""),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(d.useState)(""),j=Object(u.a)(l,2),s=j[0],b=j[1],h=Object(O.a)(k).data,x=Object(w.a)(v),f=Object(u.a)(x,1)[0];return Object(S.jsxs)("form",{id:"add-book",onSubmit:function(e){e.preventDefault(),t&&r&&s&&f({variables:{name:t,genre:r,authorId:s},refetchQueries:[{query:m}]})},children:[Object(S.jsxs)("div",{className:"field",children:[Object(S.jsx)("label",{children:"Book name:"}),Object(S.jsx)("input",{type:"text",value:t,onChange:function(e){return c(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{className:"field",children:[Object(S.jsx)("label",{children:"Genre:"}),Object(S.jsx)("input",{type:"text",value:r,onChange:function(e){return o(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{className:"field",children:[Object(S.jsx)("label",{children:"Author:"}),Object(S.jsxs)("select",{value:s,onChange:function(e){return b(e.target.value)},required:!0,children:[Object(S.jsx)("option",{children:"Select author"}),(null===h||void 0===h?void 0:h.authors)&&h.authors.map((function(e){return Object(S.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),Object(S.jsx)("button",{children:"+"})]})},C=Object(R.a)((function(e){var n=e.graphqlErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message;e.location,e.path;console.log("GraphQL ERROR : "+n)})),t&&console.log("Network ERROR")})),A=Object(y.a)([C,new E.a({uri:"/graphql"})]),L=new I.a({cache:new N.a,link:A}),Q=function(){return Object(S.jsx)(B.a,{client:L,children:Object(S.jsxs)("div",{id:"main",children:[Object(S.jsx)("h1",{children:"Reading List"}),Object(S.jsx)(q,{}),Object(S.jsx)(D,{})]})})};s.a.render(Object(S.jsx)(l.a.StrictMode,{children:Object(S.jsx)(Q,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.37429178.chunk.js.map